<!DOCTYPE html>
<html ng-app="zaikoApp">
<head>
	<title>Zaiko</title>
	<script src="js/angular.min.js" type="text/javascript"></script>
	<link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="/css/index.css">

	<meta charset="utf-8">
</head>
<body ng-controller="adminController">
	<h1>Lists</h2>
	<table>
		<tr>
			<th>Client</th>
			<th>Items</th>
			<th>Employee</th>
			<th>Status</th>
			<th>Show more</th>
			<th>Remove</th>
		</tr>
		<tr ng-repeat="(i, list) in lists">
			<td>{{list.client}}</td>
			<td>{{list.items.length}}</td>
			<td>{{list.employee.name}}</td>
			<td my-done="list" employee="list.employee"></td>
			<td><a href="" ng-click="showItems(i)">Show more</a></td>
			<td><a href="" ng-click="removeList(list._id, i)">Delete</a></td>

		</tr>
		<tr>
			<td><input type="text" ng-model="newListClient" placeholder="Client"></td>
			<td></td>
			<td></td>
			<td></td>
			<td><a href="" ng-click="addList()">Add new</a></td>
		<tr>
	</table>
	<h1>Employees</h2>
	<table>
		<tr>
			<th>Name</th>
			<th>Remove</th>
		</tr>
		<tr ng-repeat="(i, employee) in employees">
			<td>{{employee.name}}</td>
			<td><a href="" ng-click="removeEmployee(employee._id, i)">Delete</a></td>
		</tr>
		<tr>
			<td><input type="text" ng-model="newEmployee" placeholder="Name"></td>
			<td><a href="" ng-click="addEmployee()">Add new</a></td>
		</tr>
	</table>
	<div ng-show="showModal">
		<div class="mask"></div>
		<div class="modal">
			<a href="" ng-click="showModal=false">Close</a>
			<p><strong>Client: </strong>{{lists[currentList].client}}</p>
			<p>
				<strong>Employee:</strong>
				<select ng-options="employee._id as employee.name for employee in employees" ng-model="currentEmployee" ng-hide="lists[currentList].done"></select>
				<span ng-show="lists[currentList].done">{{lists[currentList].employee.name}}</span>
			</p>
			<p><strong>Revenue:</strong>{{lists[currentList].revenue | fixedTwo}} â‚¬</p>
			<p><strong>Weight:</strong>{{lists[currentList].weight | fixedTwo}} kg</p>
			<button role="button" ng-click="markDone()" ng-hide="lists[currentList].done || !lists[currentList].employee">Mark done</button>
			
			<p>Items</p>

			<table>
				<tr>
					<th>Name</th>
					<th>Code</th>
					<th>Amount</th>
					<th>Weight</th>
					<th>Package size</th>
					<th>Price</th>
					<th>Location</th>
				</tr>
				<tr ng-repeat="(i, item) in lists[currentList].items">
					<td>{{item.name}}</td>
					<td>{{item.code}}</td>
					<td>{{item.amount}}</td>
					<td>{{item.weight}}</td>
					<td>{{item.packageSize}}</td>
					<td>{{item.price}}</td>
					<td>{{item.location}}</td>
				</tr>
				<tr ng-hide="lists[currentList].done">
					<td><input type="text" ng-model="newItem.name" placeholder="Name"></td>
					<td><input type="text" ng-model="newItem.code" placeholder="Code"></td>
					<td><input type="number" ng-model="newItem.amount"</td>
					<td><input type="number" ng-model="newItem.weight"</td>
					<td><input type="number" ng-model="newItem.packageSize"</td>
					<td><input type="number" ng-model="newItem.price"</td>
					<td><input type="textr" ng-model="newItem.location"</td>
				</tr>
			</table>
			<a href="" ng-click="addItem()" ng-hide="lists[currentList].done">Add new item</a>
		</div>
	</div>
	<script src="js/app.js" type="text/javascript"></script>
</body>